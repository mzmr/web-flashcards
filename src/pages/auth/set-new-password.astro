---
import Layout from "@/layouts/Layout.astro";
import { SetNewPasswordForm } from "@/components/auth/SetNewPasswordForm";

const token = Astro.url.searchParams.get("token");

if (!token) {
  return Astro.redirect("/auth/login");
}

const handleSubmit = async (data: { password: string; confirmPassword: string; token: string }) => {
  // Tymczasowa implementacja - będzie zaktualizowana później
  console.log("Set new password attempt:", data);
};
---

<Layout title="Nowe hasło | Fiszki">
  <main class="container flex-1 flex items-center justify-center min-h-[calc(100vh-4rem)] w-full">
    <SetNewPasswordForm token={token} client:load onSubmit={handleSubmit} />
  </main>
</Layout>

<style>
  .container {
    max-width: 100% !important;
    width: 100% !important;
  }
</style>
